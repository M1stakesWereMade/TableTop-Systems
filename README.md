# Cистема управления заказами

![GitHub](https://img.shields.io/badge/Python-3.9+-blue)
![GitHub](https://img.shields.io/badge/Django-4.2+-green)
![GitHub](https://img.shields.io/badge/Django%20REST%20Framework-3.14+-orange)
![GitHub](https://img.shields.io/badge/PEP8-compliant-brightgreen)

Система управления заказами для кафе с поддержкой:
- Создания/редактирования/удаления заказов
- Поиска по номеру стола и статусу
- Отчёта о выручке
- API для интеграции с внешними сервисами
- Админ-панели Django

---

## Содержание
- [Требования](#требования)
- [Установка](#установка)
- [Настройка](#настройка)
- [Использование](#использование)
- [API Endpoints](#api-endpoints)
- [Тестирование](#тестирование)
- [Структура проекта](#структура-проекта)
- [Дополнительные возможности](#дополнительные-возможности)
- [Roadmap](#roadmap)
- [Лицензия](#лицензия)

---

## Требования
- Python 3.9+
- Django 4.2+
- Django REST Framework 3.14+
- PostgreSQL (рекомендуется) или SQLite

---

## Установка

### 1. Клонирование репозитория
```bash
git clone https://github.com/your-repo/cafe-management.git
cd cafe-management
```
### 2. Создание виртуального окружения
```bash
python -m venv venv
source venv/bin/activate  # Linux/MacOS
venv\Scripts\activate     # Windows
```
### 3. Установка зависимостей
```python
pip install -r requirements.txt
```
### 4. Настройка базы данных
В файле `cafe_management/settings.py` укажите параметры вашей базы данных:
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'your_db_name',
        'USER': 'your_db_user',
        'PASSWORD': 'your_db_password',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```
### 5. Запуск миграций
```python
python manage.py migrate
```
### 6. Создание суперпользователя (для админки)
```bash
python manage.py createsuperuser
```

---

## Настройка

### 1. Запуск сервера:
```bash
python manage.py runserver
```
Доступен по адресу `http://localhost:8000`
### 2. Доступ к админке
```bash
http://localhost:8000/admin
```
### 3. Доступ к API
```bash
http://localhost:8000/api/orders/
```

---

## Использование

### Основные функции:
- **Создание заказа**
    Перейти на `/create/` и заполнить форму с номером стола, блюдами и статусом.
- **Список заказов**
    Страница `/` с фильтрацией по номеру стола и статусу.
- **Редактирование заказа**
    Перейти на `/<pk>/update/` для изменения данных заказа.
- **Удаление заказа**
    Перейти на `/<pk>/delete/` для подтверждения удаления.
- **Отчёт по выручке**
    Страница `/revenue/` показывает общую выручку и список оплаченных заказов.

---

## API Endpoints

### Базовые эндпоинты
| Метод | URL                          | Описание                     |
|-------|------------------------------|------------------------------|
| GET   | `/api/orders/`               | Список всех заказов          |
| POST  | `/api/orders/`               | Создание заказа              |
| GET   | `/api/orders/{id}/`          | Получение заказа по ID       |
| PUT   | `/api/orders/{id}/`          | Обновление заказа            |
| DELETE| `/api/orders/{id}/`          | Удаление заказа              |

### Кастомные эндпоинты
| Метод | URL                          | Описание                                                      |
|-------|------------------------------|---------------------------------------------------------------|
| GET   | `/api/orders/search/`        | Поиск заказов по параметрам<br>`?q=номер_стола&status=статус` |

---

## Тестирование
Для запуска тестов выполните:
```bash
python manage.py test orders
```
### Доступные тесты:
- `test_order_creation` — проверка создания заказа
- `test_order_status_update` — обновление статуса
- `test_revenue_calculation` — подсчёт выручки
- `test_order_price_update` — обновление суммы заказа
- `test_decimal_serialization` — валидация Decimal

---

## Структура проекта
```
cafe-management/
├── cafe_management/        # Настройки Django
├── orders/                 # Приложение для управления заказами
│   ├── models.py           # Модель Order
│   ├── views.py            # Веб-представления
│   ├── serializers.py      # Сериализаторы для API
│   ├── urls.py             # Роутинг
│   └── tests.py            # Тесты
├── static/                 # Стили и медиафайлы
├── templates/              # HTML-шаблоны
└── requirements.txt        # Зависимости
```

---

## Дополнительные возможности

### Админ-панель
Доступна через `/admin` с правами суперпользователя
### Формат ввода блюд
В поле "Блюда" вводите через перенос строки:
```
Пицца - 500.50
Кофе - 150
```
### Поддержка Decimal
- Цены хранятся в формате `Decimal` для точности
- Автоматическое округление до 2 знаков после запятой
### Статусы заказов
| Статус    | Описание                |
|-----------|-------------------------|
| pending   | В ожидании              |
| ready     | Готов к выдаче          |
| paid      | Оплачен                 |

---

## Roadmap
- Добавить пагинацию в списке заказов
- Интеграция с платежной системой
- Визуализация выручки через Chart.js
- Мобильная адаптация интерфейса

---

## Контрибьюшены
Ваши идеи и исправления приветствуются! Создавайте issue или pull request.

Спасибо за использование системы управления заказами для вашего кафе!

---

### Объяснение структуры:
1. **Требования** — указывает зависимости проекта.
2. **Установка** — пошаговый гайд для старта.
3. **Настройка** — базовые команды для запуска.
4. **Использование** — ключевые функции интерфейса.
5. **API Endpoints** — документация REST API.
6. **Тестирование** — как запустить тесты.
7. **Структура проекта** — визуальное представление каталога.
8. **Дополнительные возможности** — особенности реализации.
9. **Roadmap** — планы по развитию.

---

## Лицензия
Проект лицензирован под [MIT License](LICENSE).
